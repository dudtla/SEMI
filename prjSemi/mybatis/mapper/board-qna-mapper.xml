<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BoardQnaMapper">

	<insert id="insertQna">
		INSERT INTO MEMBER_QNA 
		(QNA_NO, MEMBER_NO , TITLE, CONTENT) 
		VALUES (SEQ_QNA_NO.NEXTVAL, #{memberNo}, #{title}, #{content})
	</insert>
	
	<select id="getQnaList" resultType="com.kh.app.board.qna.vo.BoardQnaVo">
		SELECT Q.QNA_NO, Q.TITLE, Q.CONTENT, Q. ENROLL_DATE, M.NICK AS WRITER_NICK
		FROM MEMBER_QNA Q
		JOIN MEMBER M ON Q.MEMBER_NO = M.MEMBER_NO
		WHERE Q.DELETE_YN = 'N'
		ORDER BY
		Q.ENROLL_DATE DESC
	</select>
	
	<select id="getQnaDeatil" resultType="com.kh.app.board.qna.vo.BoardQnaVo">
		SELECT Q.QNA_NO, Q.TITLE, Q.CONTENT, Q. ENROLL_DATE, M.NICK AS WRITER_NICK
		FROM MEMBER_QNA Q
		JOIN MEMBER M ON Q.MEMBER_NO = M.MEMBER_NO
		WHERE Q.QNA_NO = #{no}
		AND Q.DELETE_YN = 'N'
	</select>
	
	<update id="qnaAnswer">
		UPDATE MEMBER_QNA
		SET ANSWER = #{answer}
		WHERE QNA_NO = 1
	</update>
	
	<update id="qnaDelete" >
		UPDATE MEMBER_QNA
		SET DELETE_YN = 'Y'
		WHERE QNA_NO = #{qnaNo}
		AND MEMBER_NO = #{memberNo}
	</update>
	

</mapper>